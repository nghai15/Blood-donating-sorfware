<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(title=~{::title}, content=~{::div#content})}">
<head>
    <title>Tìm Người Hiến Máu</title>
</head>
<body>
<div id="content" class="bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Tìm Người Hiến Máu</h2>

    <!-- Form lọc -->
    <form th:action="@{/donors}" method="get" class="mb-6 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4">
        <div class="flex-grow w-full md:w-auto">
            <label for="bloodGroup" class="sr-only">Nhóm máu:</label>
            <select id="bloodGroup" name="bloodGroup" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="">Tất cả nhóm máu</option>
                <option th:each="group : ${bloodGroups}" th:value="${group}" th:text="${group}" th:selected="${selectedBloodGroup != null and selectedBloodGroup.name() == group.name()}"></option>
            </select>
        </div>
        <button type="submit" class="btn-primary w-full md:w-auto px-6 py-2">Tìm kiếm</button>
    </form>

    <!-- Bảng danh sách người hiến máu -->
    <div th:if="${donors.empty}" class="bg-blue-100 text-blue-700 p-4 rounded-md text-center">
        <p>Không tìm thấy người hiến máu nào phù hợp với tiêu chí của bạn.</p>
    </div>
    <div th:unless="${donors.empty}" class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow">
            <thead>
            <tr class="table-header">
                <th class="py-3 px-6 text-left">ID</th>
                <th class="py-3 px-6 text-left">Tên</th>
                <th class="py-3 px-6 text-left">Email</th>
                <th class="py-3 px-6 text-left">Nhóm máu</th>
                <th class="py-3 px-6 text-left">Địa chỉ</th>
                <th class="py-3 px-6 text-left">Sẵn sàng hiến</th>
                <th class="py-3 px-6 text-left">Lần hiến cuối</th>
            </tr>
            </thead>
            <tbody class="text-gray-700">
            <tr th:each="donor, iterStat : ${donors}" th:classappend="${iterStat.odd} ? 'table-row-odd' : 'table-row-even'">
                <td class="py-3 px-6" th:text="${donor.id}"></td>
                <td class="py-3 px-6" th:text="${donor.name}"></td>
                <td class="py-3 px-6" th:text="${donor.email}"></td>
                <td class="py-3 px-6" th:text="${donor.bloodGroup}"></td>
                <td class="py-3 px-6" th:text="${donor.address}"></td>
                <td class="py-3 px-6" th:text="${userService.getDonationReadyStatus(donor)}"></td>
                <td class="py-3 px-6" th:text="${donor.lastDonation != null ? donor.lastDonation : 'N/A'}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
